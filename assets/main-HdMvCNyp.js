import"./modulepreload-polyfill-B5Qt9EMX.js";var r,s,v,f,u,x,C,I=0,i=0,q=0;function E(){r=[{id:"p1",name:"상품1",val:1e4,q:50},{id:"p2",name:"상품2",val:2e4,q:30},{id:"p3",name:"상품3",val:3e4,q:20},{id:"p4",name:"상품4",val:15e3,q:0},{id:"p5",name:"상품5",val:25e3,q:10}];var e=document.getElementById("app");let t=document.createElement("div");var d=document.createElement("div");let a=document.createElement("h1");f=document.createElement("div"),u=document.createElement("div"),s=document.createElement("select"),v=document.createElement("button"),x=document.createElement("div"),f.id="cart-items",u.id="cart-total",s.id="product-select",v.id="add-to-cart",x.id="stock-status",t.className="bg-gray-100 p-8",d.className="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl p-8",a.className="text-2xl font-bold mb-4",u.className="text-xl font-bold my-4",s.className="border rounded p-2 mr-2",v.className="bg-blue-500 text-white px-4 py-2 rounded",x.className="text-sm text-gray-500 mt-2",a.textContent="장바구니",v.textContent="추가",b(),d.appendChild(a),d.appendChild(f),d.appendChild(u),d.appendChild(s),d.appendChild(v),d.appendChild(x),t.appendChild(d),e.appendChild(t),y(),setTimeout(function(){setInterval(function(){var n=r[Math.floor(Math.random()*r.length)];Math.random()<.3&&n.q>0&&(n.val=Math.round(n.val*.8),alert("번개세일! "+n.name+"이(가) 20% 할인 중입니다!"),b())},3e4)},Math.random()*1e4),setTimeout(function(){setInterval(function(){if(C){var n=r.find(function(o){return o.id!==C&&o.q>0});n&&(alert(n.name+"은(는) 어떠세요? 지금 구매하시면 5% 추가 할인!"),n.val=Math.round(n.val*.95),b())}},6e4)},Math.random()*2e4)}function b(){s.innerHTML="",r.forEach(function(e){var t=document.createElement("option");t.value=e.id,t.textContent=e.name+" - "+e.val+"원",e.q===0&&(t.disabled=!0),s.appendChild(t)})}function y(){i=0,q=0;for(var e=f.children,t=0,d=0;d<e.length;d++)(function(){for(var l,p=0;p<r.length;p++)if(r[p].id===e[d].id){l=r[p];break}var h=parseInt(e[d].querySelector("span").textContent.split("x ")[1]),g=l.val*h,m=0;q+=h,t+=g,h>=10&&(l.id==="p1"?m=.1:l.id==="p2"?m=.15:l.id==="p3"?m=.2:l.id==="p4"?m=.05:l.id==="p5"&&(m=.25)),i+=g*(1-m)})();let a=0;if(q>=30){var n=i*.25,o=t-i;n>o?(i=t*(1-.25),a=.25):a=(t-i)/t}else a=(t-i)/t;if(new Date().getDay()===2&&(i*=1-.1,a=Math.max(a,.1)),u.textContent="총액: "+Math.round(i)+"원",a>0){var c=document.createElement("span");c.className="text-green-500 ml-2",c.textContent="("+(a*100).toFixed(1)+"% 할인 적용)",u.appendChild(c)}S(),M()}const M=()=>{I=Math.floor(i/1e3);var e=document.getElementById("loyalty-points");e||(e=document.createElement("span"),e.id="loyalty-points",e.className="text-blue-500 ml-2",u.appendChild(e)),e.textContent="(포인트: "+I+")"};function S(){var e="";r.forEach(function(t){t.q<5&&(e+=t.name+": "+(t.q>0?"재고 부족 ("+t.q+"개 남음)":"품절")+`
`)}),x.textContent=e}E();v.addEventListener("click",function(){var e=s.value,t=r.find(function(o){return o.id===e});if(t&&t.q>0){var d=document.getElementById(t.id);if(d){var a=parseInt(d.querySelector("span").textContent.split("x ")[1])+1;a<=t.q?(d.querySelector("span").textContent=t.name+" - "+t.val+"원 x "+a,t.q--):alert("재고가 부족합니다.")}else{var n=document.createElement("div");n.id=t.id,n.className="flex justify-between items-center mb-2",n.innerHTML="<span>"+t.name+" - "+t.val+'원 x 1</span><div><button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="'+t.id+'" data-change="-1">-</button><button class="quantity-change bg-blue-500 text-white px-2 py-1 rounded mr-1" data-product-id="'+t.id+'" data-change="1">+</button><button class="remove-item bg-red-500 text-white px-2 py-1 rounded" data-product-id="'+t.id+'">삭제</button></div>',f.appendChild(n),t.q--}y(),C=e}});f.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("quantity-change")||t.classList.contains("remove-item")){var d=t.dataset.productId,a=document.getElementById(d),n=r.find(function(p){return p.id===d});if(t.classList.contains("quantity-change")){var o=parseInt(t.dataset.change),c=parseInt(a.querySelector("span").textContent.split("x ")[1])+o;c>0&&c<=n.q+parseInt(a.querySelector("span").textContent.split("x ")[1])?(a.querySelector("span").textContent=a.querySelector("span").textContent.split("x ")[0]+"x "+c,n.q-=o):c<=0?(a.remove(),n.q-=o):alert("재고가 부족합니다.")}else if(t.classList.contains("remove-item")){var l=parseInt(a.querySelector("span").textContent.split("x ")[1]);n.q+=l,a.remove()}y()}});
